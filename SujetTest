### Sujet d'entra√Ænement : **D√©ploiement d'une Infrastructure R√©seau Compl√®te avec Automatisation**

#### **Objectif p√©dagogique**  
D√©velopper des comp√©tences pratiques en d√©ploiement d‚Äôinfrastructures r√©seau, incluant :  
- La configuration mat√©rielle (adressage IP, connexion des switchs/routeurs).  
- L'automatisation des d√©ploiements avec Ansible et Terraform.  
- La cr√©ation et la gestion d'une infrastructure virtuelle avec VirtualBox/VMware ou un cloud priv√©.  
- La mise en place de services r√©seau (Active Directory, serveur de messagerie, etc.).  
- La s√©curisation et la gestion des acc√®s utilisateurs.  

---

### **Partie 1 : Pr√©paration de l‚Äôenvironnement**
1. **Mat√©riel et pr√©requis** :
   - 10 postes physiques ou VM.
   - Un switch manageable et un routeur basique (ou simulateur r√©seau comme GNS3 ou Packet Tracer).
   - Un serveur h√©bergeant les scripts Ansible/Terraform.  

2. **Logiciels n√©cessaires** :
   - Terraform pour provisionner les VMs.  
   - Ansible pour configurer automatiquement les services et applications.  
   - Debian et Kali Linux comme OS pour les VMs.  

3. **Plan d‚Äôadressage r√©seau** :  
   - **R√©seau local** : 192.168.100.0/24  
   - **Sous-r√©seaux** :  
     - 192.168.100.0/28 pour les serveurs.  
     - 192.168.100.16/28 pour les postes utilisateurs.  
   - **IP du routeur** : 192.168.100.1  

---

### **Partie 2 : D√©ploiement et configuration r√©seau**
1. **Configuration manuelle initiale** :  
   - Configurez le switch avec VLANs pour isoler le trafic.  
     - VLAN 10 : Serveurs.  
     - VLAN 20 : Postes utilisateurs.  
   - Configurez le routeur pour assurer la connexion entre VLANs et le routage vers l‚Äôext√©rieur.  
   - Assurez la connectivit√© entre tous les √©quipements.  

2. **V√©rifications** :  
   - Utilisez des outils comme `ping`, `traceroute`, et `nmap` pour v√©rifier la configuration du r√©seau.  

---

### **Partie 3 : Automatisation avec Terraform et Ansible**
1. **Provisionnement des VMs avec Terraform** :
   - √âcrivez un script Terraform pour d√©ployer :  
     - 2 VMs Debian pour les services.  
     - 8 VMs Kali pour les postes utilisateurs.  

   Exemple de script Terraform pour une VM Debian :  
   ```hcl
   provider "virtualbox" {}

   resource "virtualbox_vm" "debian" {
     name   = "debian-server"
     cpus   = 2
     memory = 2048
     network_adapter {
       type           = "bridged"
       host_interface = "eth0"
     }
     os {
       iso_path = "path/to/debian.iso"
     }
   }
   ```

2. **Automatisation de la configuration avec Ansible** :
   - **Playbook pour les serveurs** :  
     - Installer Active Directory (`samba` pour AD sous Linux).  
     - Configurer un serveur de messagerie (Postfix/Dovecot).  
   - **Playbook pour les clients** :  
     - Configurer l‚Äôacc√®s r√©seau et le client de messagerie.  
     - Ajouter les utilisateurs au domaine AD.  

---

### **Partie 4 : Mise en place des services**
1. **Active Directory (AD)** :  
   - Configurez un serveur Samba comme contr√¥leur de domaine.  
   - Cr√©ez un domaine nomm√© `lab.local`.  
   - Ajoutez des utilisateurs avec des permissions diff√©rentes.

2. **Serveur de messagerie** :  
   - Installez et configurez Postfix pour l'envoi de mails et Dovecot pour l'acc√®s IMAP/POP3.  
   - Ajoutez des bo√Ætes mails pour les utilisateurs du domaine AD.  

3. **Configuration des postes utilisateurs** :  
   - Configurez les postes Kali pour se connecter au domaine AD.  
   - Testez les connexions avec les utilisateurs cr√©√©s.  

---

### **Partie 5 : Tests et validation**
1. **Tests r√©seau** :  
   - V√©rifiez la connectivit√© entre tous les √©l√©ments du r√©seau.  
   - Analysez le trafic r√©seau avec Wireshark pour identifier d‚Äô√©ventuels probl√®mes.  

2. **Tests des services** :  
   - Authentifiez-vous sur le domaine avec les utilisateurs cr√©√©s.  
   - Envoyez et recevez des emails entre utilisateurs.  

---

### **Partie 6 : S√©curisation et optimisation**
1. **S√©curisation des services** :  
   - Activez TLS pour les communications du serveur de messagerie.  
   - Configurez un pare-feu avec `ufw` ou `iptables` sur chaque VM.  

2. **Optimisation des performances** :  
   - Impl√©mentez une solution de monitoring r√©seau comme Nagios ou Zabbix.  

---

### **Livrables attendus** :
1. Documentation des √©tapes suivies.  
2. Scripts Terraform et Ansible utilis√©s.  
3. Capture d'√©cran des tests r√©alis√©s (connexion AD, emails envoy√©s/re√ßus).  
4. Analyse des logs r√©seau et des performances.  

---

### Bonus : Sc√©nario avanc√©
- Ajoutez un serveur Web avec Nginx et un certificat SSL.  
- Configurez un VPN pour permettre des connexions distantes s√©curis√©es au r√©seau.  

Ce sujet vous permettra de couvrir toutes les comp√©tences list√©es de mani√®re progressive et compl√®te. üòä
